"use strict";(()=>{var e={};e.id=696,e.ids=[696],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},92761:e=>{e.exports=require("node:async_hooks")},17718:e=>{e.exports=require("node:child_process")},6005:e=>{e.exports=require("node:crypto")},15673:e=>{e.exports=require("node:events")},87561:e=>{e.exports=require("node:fs")},93977:e=>{e.exports=require("node:fs/promises")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},97742:e=>{e.exports=require("node:process")},25997:e=>{e.exports=require("node:tty")},47261:e=>{e.exports=require("node:util")},71017:e=>{e.exports=require("path")},82601:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>x,originalPathname:()=>y,patchFetch:()=>q,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var o={};t.r(o),t.d(o,{GET:()=>c,POST:()=>p});var s=t(10884),a=t(16132),n=t(21040),i=t(95798),u=t(29730);async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("search"),o=r.get("available"),s=r.get("checkIn"),a=r.get("checkOut");if(t){let e=await u._.room.findMany({where:{name:{contains:t,mode:"insensitive"}},orderBy:{name:"asc"}});return i.Z.json(e)}if("true"===o&&s&&a){let e=new Date(s),r=new Date(a),t=await u._.room.findMany({where:{reservationRooms:{none:{reservation:{OR:[{AND:[{checkInDate:{lte:e}},{checkOutDate:{gt:e}}]},{AND:[{checkInDate:{lt:r}},{checkOutDate:{gte:r}}]},{AND:[{checkInDate:{gte:e}},{checkOutDate:{lte:r}}]}]}}}},orderBy:{name:"asc"}});return i.Z.json(t)}let n=await u._.room.findMany({orderBy:{name:"asc"}});return i.Z.json(n)}catch(e){return console.error("Error fetching rooms:",e),i.Z.json({error:"Failed to fetch rooms"},{status:500})}}async function p(e){try{let r=await e.json(),t=await u._.room.create({data:r});return i.Z.json(t,{status:201})}catch(e){if(console.error("Error creating room:",e),"P2002"===e.code)return i.Z.json({error:"A room with this number already exists"},{status:409});return i.Z.json({error:"Failed to create room"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/rooms/route",pathname:"/api/rooms",filename:"route",bundlePath:"app/api/rooms/route"},resolvedPagePath:"/Users/aunz/MyProject/New/cool_cat_resort/src/app/api/rooms/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:x,staticGenerationBailout:f}=d,y="/api/rooms/route";function q(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[271,107,730],()=>t(82601));module.exports=o})();