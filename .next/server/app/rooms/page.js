(()=>{var e={};e.id=799,e.ids=[799],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27622:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var n=r(67096),o=r(16132),i=r(37284),a=r.n(i),s=r(32564),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["rooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33295)),"/Users/aunz/MyProject/New/cool_cat_resort/src/app/rooms/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4570)),"/Users/aunz/MyProject/New/cool_cat_resort/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/aunz/MyProject/New/cool_cat_resort/src/app/rooms/page.tsx"],u="/rooms/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/rooms/page",pathname:"/rooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20827:(e,t,r)=>{Promise.resolve().then(r.bind(r,44178))},31086:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(57674),o=r(53854);let i=(0,n.Z)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},47594:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(57674),o=r(53854);let i=(0,n.Z)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},61999:(e,t,r)=>{"use strict";var n=r(41769);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(47542)),i=n(r(5233)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(34218)),s=n(r(58273));n(r(34324));var l=r(586),d=n(r(63043));n(r(20599));var c=n(r(74005)),u=n(r(52353)),p=r(77923),h=r(49180),x=r(99677),m=n(r(6087)),g=r(3123),f=r(11403),j=r(53854);let y=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}let b=e=>{let{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,c.default)(n,f.getCollapseUtilityClass,r)},w=(0,u.default)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})(({theme:e,ownerState:t})=>(0,i.default)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,i.default)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"})),C=(0,u.default)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>(0,i.default)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),P=(0,u.default)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>(0,i.default)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),k=a.forwardRef(function(e,t){let r=(0,p.useDefaultProps)({props:e,name:"MuiCollapse"}),{addEndListener:n,children:c,className:u,collapsedSize:f="0px",component:v,easing:k,in:E,onEnter:_,onEntered:R,onEntering:S,onExit:z,onExited:M,onExiting:O,orientation:W="vertical",style:I,timeout:D=h.duration.standard,TransitionComponent:F=l.Transition}=r,T=(0,o.default)(r,y),Z=(0,i.default)({},r,{orientation:W,collapsedSize:f}),$=b(Z),A=(0,m.default)(),H=(0,d.default)(),N=a.useRef(null),q=a.useRef(),U="number"==typeof f?`${f}px`:f,L="horizontal"===W,G=L?"width":"height",B=a.useRef(null),V=(0,g.useForkRef)(t,B),J=e=>t=>{if(e){let r=B.current;void 0===t?e(r):e(r,t)}},K=()=>N.current?N.current[L?"clientWidth":"clientHeight"]:0,X=J((e,t)=>{N.current&&L&&(N.current.style.position="absolute"),e.style[G]=U,_&&_(e,t)}),Q=J((e,t)=>{let r=K();N.current&&L&&(N.current.style.position="");let{duration:n,easing:o}=(0,x.getTransitionProps)({style:I,timeout:D,easing:k},{mode:"enter"});if("auto"===D){let t=A.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,q.current=t}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[G]=`${r}px`,e.style.transitionTimingFunction=o,S&&S(e,t)}),Y=J((e,t)=>{e.style[G]="auto",R&&R(e,t)}),ee=J(e=>{e.style[G]=`${K()}px`,z&&z(e)}),et=J(M),er=J(e=>{let t=K(),{duration:r,easing:n}=(0,x.getTransitionProps)({style:I,timeout:D,easing:k},{mode:"exit"});if("auto"===D){let r=A.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,q.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[G]=U,e.style.transitionTimingFunction=n,O&&O(e)});return(0,j.jsx)(F,(0,i.default)({in:E,onEnter:X,onEntered:Y,onEntering:Q,onExit:ee,onExited:et,onExiting:er,addEndListener:e=>{"auto"===D&&H.start(q.current||0,e),n&&n(B.current,e)},nodeRef:B,timeout:"auto"===D?null:D},T,{children:(e,t)=>(0,j.jsx)(w,(0,i.default)({as:v,className:(0,s.default)($.root,u,{entered:$.entered,exited:!E&&"0px"===U&&$.hidden}[e]),style:(0,i.default)({[L?"minWidth":"minHeight"]:U},I),ref:V},t,{ownerState:(0,i.default)({},Z,{state:e}),children:(0,j.jsx)(C,{ownerState:(0,i.default)({},Z,{state:e}),className:$.wrapper,ref:N,children:(0,j.jsx)(P,{ownerState:(0,i.default)({},Z,{state:e}),className:$.wrapperInner,children:c})})}))}))});k.muiSupportAuto=!0,t.default=k},11403:(e,t,r)=>{"use strict";var n=r(41769);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getCollapseUtilityClass=function(e){return(0,i.default)("MuiCollapse",e)};var o=n(r(1036)),i=n(r(10270));let a=(0,o.default)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);t.default=a},91642:(e,t,r)=>{"use strict";var n=r(41769);Object.defineProperty(t,"__esModule",{value:!0});var o={collapseClasses:!0};Object.defineProperty(t,"collapseClasses",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=n(r(61999)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(11403));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}Object.keys(a).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e))&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))})},44178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ej});var n=r(53854),o=r(34218),i=r(59197),a=r(98963),s=r(72336),l=r.n(s),d=r(33671),c=r.n(d),u=r(30793),p=r.n(u),h=r(77291),x=r.n(h),m=r(36510),g=r.n(m),f=r(91642),j=r.n(f),y=r(16551),v=r(88162),b=r(31086),w=r(47594),C=r(55570),P=r(58279),k=r.n(P),E=r(49267),_=r.n(E),R=r(96961),S=r.n(R),z=r(25469),M=r(77491);let O=M.Ry({id:M.Z_().optional(),name:M.Z_().min(1,"Room name is required"),price:M.Rx().min(0,"Price must be positive"),createdAt:M.hT().optional(),updatedAt:M.hT().optional()}),W=O.omit({id:!0,createdAt:!0,updatedAt:!0});var I=r(14371);function D({roomHook:e,editingRoom:t,onEditComplete:r}){let[s,l]=(0,o.useState)({name:t?.name||"",price:t?.price||0}),[d,u]=(0,o.useState)({}),[h,m]=(0,o.useState)(!1),[f,j]=(0,o.useState)(!1),[y,v]=(0,o.useState)(null),b=(0,i.Z)(),w=(0,a.Z)(b.breakpoints.down("md")),C=(0,z.t)(),{addRoom:P,editRoom:E}=e||C,R=!!t,M=e=>t=>{let r="price"===e?parseFloat(t.target.value)||0:t.target.value;l(t=>({...t,[e]:r})),d[e]&&u(t=>({...t,[e]:""}))},O=()=>{try{return W.parse(s),u({}),!0}catch(e){if(e instanceof I.jm){let t={};e.errors.forEach(e=>{if(e.path.length>0){let r=e.path[0];t[r]=e.message}}),u(t)}return!1}},D=async e=>{if(e.preventDefault(),j(!1),v(null),O()){m(!0);try{if(R&&t){let e={name:s.name,price:s.price},n=await E(t.id,e);n?(j(!0),r?.(),setTimeout(()=>j(!1),3e3)):v("ไม่สามารถอัปเดตห้องพักได้ กรุณาลองใหม่อีกครั้ง")}else{let e={name:s.name,price:s.price},t=await P(e);t?(j(!0),l({name:"",price:0}),u({}),setTimeout(()=>j(!1),3e3)):v("ไม่สามารถสร้างห้องพักได้ กรุณาลองใหม่อีกครั้ง")}}catch(e){v(e instanceof Error?e.message:"เกิดข้อผิดพลาดที่ไม่คาดคิด")}finally{m(!1)}}};return(0,n.jsxs)(g(),{elevation:2,sx:{p:3},children:[n.jsx(p(),{variant:"h6",gutterBottom:!0,children:R?"แก้ไขห้องพัก":"เพิ่มห้องพักใหม่"}),f&&n.jsx(k(),{severity:"success",sx:{mb:2},onClose:()=>j(!1),children:R?"อัปเดตห้องพักสำเร็จ!":"สร้างห้องพักสำเร็จ!"}),y&&n.jsx(k(),{severity:"error",sx:{mb:2},onClose:()=>v(null),children:y}),(0,n.jsxs)(c(),{component:"form",onSubmit:D,sx:{display:"flex",flexDirection:"column",gap:2},children:[n.jsx(_(),{fullWidth:!0,label:"ชื่อห้องพัก",value:s.name,onChange:M("name"),error:!!d.name,helperText:d.name,size:w?"small":"medium",required:!0}),n.jsx(_(),{fullWidth:!0,label:"ราคาต่อคืน (฿)",type:"number",value:s.price,onChange:M("price"),error:!!d.price,helperText:d.price,size:w?"small":"medium",inputProps:{min:0,step:.01},required:!0}),(0,n.jsxs)(c(),{sx:{display:"flex",gap:2,mt:2},children:[n.jsx(x(),{type:"submit",variant:"contained",disabled:h,sx:{flex:1},children:h?(0,n.jsxs)(n.Fragment,{children:[n.jsx(S(),{size:20,color:"inherit"}),R?"กำลังอัปเดต...":"กำลังสร้าง..."]}):R?"อัปเดตห้องพัก":"สร้างห้องพัก"}),n.jsx(x(),{type:"button",variant:"outlined",onClick:()=>{t&&r?r():l({name:"",price:0}),v(null)},disabled:h,sx:{flex:1},children:"ยกเลิก"})]})]})]})}var F=r(39233),T=r(83927),Z=r(58163),$=r.n(Z),A=r(59632),H=r.n(A),N=r(57119),q=r.n(N),U=r(30938),L=r.n(U),G=r(24829),B=r(26383),V=r.n(B),J=r(79542),K=r.n(J),X=r(4536),Q=r.n(X),Y=r(67117),ee=r.n(Y),et=r(33527),er=r.n(et),en=r(97306),eo=r.n(en),ei=r(14208),ea=r.n(ei),es=r(39634),el=r.n(es),ed=r(45767),ec=r.n(ed),eu=r(65146),ep=r.n(eu),eh=r(54091),ex=r(99372);function em({roomHook:e}){let[t,r]=(0,o.useState)(null),[i,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)(""),f=(0,z.t)(),{rooms:j,loading:y,error:v}=e||f,b=e=>{r(e)},w=()=>{r(null)},C=e=>{l(e),a(!0)},P=async()=>{if(s){u(!0);try{await (e||f).removeRoom(s.id),a(!1),l(null)}catch(e){console.error("Error deleting room:",e)}finally{u(!1)}}},E=()=>{a(!1),l(null)},R=(0,o.useMemo)(()=>[{accessorKey:"name",header:"ชื่อห้อง",cell:e=>n.jsx(p(),{variant:"body2",fontWeight:"medium",children:e.getValue()})},{accessorKey:"price",header:"ราคา",cell:e=>(0,n.jsxs)(p(),{variant:"body2",fontWeight:"bold",color:"primary",children:["฿",e.getValue().toFixed(2)]})},{id:"actions",header:"การดำเนินการ",cell:e=>{let t=e.row.original;return(0,n.jsxs)(c(),{sx:{display:"flex",gap:1,alignItems:"center"},children:[n.jsx($(),{title:"แก้ไข",children:n.jsx(H(),{size:"small",onClick:()=>b(t),color:"primary",children:n.jsx(eh.Z,{fontSize:"small"})})}),n.jsx($(),{title:"ลบ",children:n.jsx(H(),{size:"small",onClick:()=>C(t),color:"error",children:n.jsx(ex.Z,{fontSize:"small"})})})]})}}],[]),M=(0,F.b7)({data:j,columns:R,getCoreRowModel:(0,T.sC)(),getFilteredRowModel:(0,T.vL)(),getSortedRowModel:(0,T.tj)(),getPaginationRowModel:(0,T.G_)(),state:{globalFilter:h},onGlobalFilterChange:m,globalFilterFn:"includesString",initialState:{pagination:{pageSize:10}}});return y?(0,n.jsxs)(g(),{elevation:2,sx:{p:3,textAlign:"center"},children:[n.jsx(S(),{}),n.jsx(p(),{variant:"body2",sx:{mt:2},children:"กำลังโหลดห้องพัก..."})]}):v?n.jsx(g(),{elevation:2,sx:{p:3},children:n.jsx(k(),{severity:"error",children:v})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g(),{elevation:2,sx:{p:{xs:2,sm:3},borderRadius:2},children:[(0,n.jsxs)(p(),{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main",mb:{xs:2,sm:3}},children:["ห้องพัก (",j.length,")"]}),n.jsx(()=>(0,n.jsxs)(c(),{sx:{display:{xs:"block",md:"none"}},children:[n.jsx(_(),{fullWidth:!0,variant:"outlined",placeholder:"ค้นหาห้องพัก...",value:h??"",onChange:e=>m(e.target.value),sx:{mb:2},size:"small"}),0===M.getRowModel().rows.length?n.jsx(c(),{sx:{p:3,textAlign:"center"},children:n.jsx(p(),{variant:"body2",color:"text.secondary",children:0===j.length?"ไม่พบห้องพัก เพิ่มห้องพักแรกด้านบน":"ไม่พบห้องพักที่ตรงกับการค้นหา"})}):(0,n.jsxs)(n.Fragment,{children:[M.getRowModel().rows.map(e=>{let t=e.original;return n.jsx(q(),{sx:{mb:2,borderRadius:2},children:n.jsx(L(),{sx:{pb:2},children:(0,n.jsxs)(G.default,{spacing:2,children:[n.jsx(p(),{variant:"h6",component:"div",sx:{fontWeight:600},children:t.name}),(0,n.jsxs)(p(),{variant:"body1",fontWeight:"bold",color:"primary",sx:{mt:1},children:["฿",t.price.toLocaleString()]}),(0,n.jsxs)(c(),{sx:{display:"flex",gap:2,mt:2,justifyContent:"flex-end"},children:[n.jsx(x(),{size:"medium",variant:"outlined",onClick:()=>b(t),color:"primary",startIcon:n.jsx(eh.Z,{}),sx:{minHeight:44,px:3,borderRadius:2},children:"แก้ไข"}),n.jsx(x(),{size:"medium",variant:"outlined",onClick:()=>C(t),color:"error",startIcon:n.jsx(ex.Z,{}),sx:{minHeight:44,px:3,borderRadius:2},children:"ลบ"})]})]})})},t.id)}),M.getPageCount()>1&&(0,n.jsxs)(c(),{sx:{mt:3},children:[(0,n.jsxs)(p(),{variant:"body2",color:"text.secondary",textAlign:"center",sx:{mb:2},children:["หน้า ",M.getState().pagination.pageIndex+1," จาก ",M.getPageCount()]}),(0,n.jsxs)(c(),{sx:{display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[n.jsx(x(),{variant:"outlined",size:"medium",onClick:()=>M.setPageIndex(0),disabled:!M.getCanPreviousPage(),sx:{minWidth:48,minHeight:48},children:"<<"}),n.jsx(x(),{variant:"outlined",size:"medium",onClick:()=>M.previousPage(),disabled:!M.getCanPreviousPage(),sx:{minWidth:48,minHeight:48},children:"<"}),n.jsx(x(),{variant:"outlined",size:"medium",onClick:()=>M.nextPage(),disabled:!M.getCanNextPage(),sx:{minWidth:48,minHeight:48},children:">"}),n.jsx(x(),{variant:"outlined",size:"medium",onClick:()=>M.setPageIndex(M.getPageCount()-1),disabled:!M.getCanNextPage(),sx:{minWidth:48,minHeight:48},children:">>"})]})]})]})]}),{}),n.jsx(()=>(0,n.jsxs)(c(),{sx:{display:{xs:"none",md:"block"}},children:[(0,n.jsxs)(c(),{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[n.jsx(_(),{variant:"outlined",placeholder:"ค้นหาห้องพัก...",value:h??"",onChange:e=>m(e.target.value),sx:{maxWidth:400},size:"small"}),(0,n.jsxs)(p(),{variant:"body2",color:"text.secondary",children:[M.getFilteredRowModel().rows.length," ห้องพัก"]})]}),0===M.getRowModel().rows.length?n.jsx(c(),{sx:{p:3,textAlign:"center"},children:n.jsx(p(),{variant:"body2",color:"text.secondary",children:0===j.length?"ไม่พบห้องพัก เพิ่มห้องพักแรกด้านบน":"ไม่พบห้องพักที่ตรงกับการค้นหา"})}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(V(),{component:g(),elevation:1,children:(0,n.jsxs)(K(),{children:[n.jsx(Q(),{children:M.getHeaderGroups().map(e=>n.jsx(ee(),{children:e.headers.map(e=>(0,n.jsxs)(er(),{onClick:e.column.getToggleSortingHandler(),sx:{cursor:e.column.getCanSort()?"pointer":"default",userSelect:"none",fontWeight:600,backgroundColor:"grey.50"},children:[e.isPlaceholder?null:(0,F.ie)(e.column.columnDef.header,e.getContext()),{asc:" \uD83D\uDD3C",desc:" \uD83D\uDD3D"}[e.column.getIsSorted()]??null]},e.id))},e.id))}),n.jsx(eo(),{children:M.getRowModel().rows.map(e=>n.jsx(ee(),{hover:!0,children:e.getVisibleCells().map(e=>n.jsx(er(),{children:(0,F.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),M.getPageCount()>1&&(0,n.jsxs)(c(),{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[(0,n.jsxs)(c(),{sx:{display:"flex",gap:1},children:[n.jsx(x(),{variant:"outlined",size:"small",onClick:()=>M.setPageIndex(0),disabled:!M.getCanPreviousPage(),children:"<<"}),n.jsx(x(),{variant:"outlined",size:"small",onClick:()=>M.previousPage(),disabled:!M.getCanPreviousPage(),children:"<"}),n.jsx(x(),{variant:"outlined",size:"small",onClick:()=>M.nextPage(),disabled:!M.getCanNextPage(),children:">"}),n.jsx(x(),{variant:"outlined",size:"small",onClick:()=>M.setPageIndex(M.getPageCount()-1),disabled:!M.getCanNextPage(),children:">>"})]}),(0,n.jsxs)(p(),{variant:"body2",color:"text.secondary",children:["หน้า ",M.getState().pagination.pageIndex+1," จาก ",M.getPageCount()]})]})]})]}),{})]}),n.jsx(ea(),{open:!!t,onClose:w,maxWidth:"sm",fullWidth:!0,children:n.jsx(el(),{sx:{p:0},children:n.jsx(D,{roomHook:e,editingRoom:t||void 0,onEditComplete:w})})}),(0,n.jsxs)(ea(),{open:i,onClose:E,children:[n.jsx(ec(),{children:"ยืนยันการลบ"}),n.jsx(el(),{children:(0,n.jsxs)(p(),{children:['คุณแน่ใจหรือไม่ที่จะลบห้องพัก "',s?.name,'"?']})}),(0,n.jsxs)(ep(),{children:[n.jsx(x(),{onClick:E,children:"ยกเลิก"}),n.jsx(x(),{onClick:P,color:"error",disabled:d,startIcon:d?n.jsx(S(),{size:16}):void 0,children:d?"กำลังลบ...":"ลบ"})]})]})]})}var eg=r(75548),ef=r.n(eg);function ej(){let[e,t]=(0,o.useState)(!1),r=(0,i.Z)(),s=(0,a.Z)(r.breakpoints.down("md")),d=(0,z.t)();return n.jsx(C.Z,{title:"Room Management - Cool Cat Resort",children:(0,n.jsxs)(l(),{maxWidth:"xl",sx:{py:{xs:2,sm:4}},children:[(0,n.jsxs)(c(),{sx:{display:"flex",alignItems:"center",gap:2,mb:{xs:3,sm:4}},children:[n.jsx(p(),{variant:s?"h4":"h3",component:"h1",sx:{fontWeight:700,color:"primary.main",textAlign:{xs:"center",sm:"left"},flex:1},children:"จัดการห้องพัก"}),n.jsx(x(),{component:ef(),href:"/",variant:"outlined",startIcon:n.jsx(y.Z,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:"medium"},children:"กลับหน้าหลัก"})]}),(0,n.jsxs)(c(),{sx:{display:{xs:"block",md:"none"}},children:[n.jsx(g(),{elevation:1,sx:{mb:3},children:n.jsx(x(),{fullWidth:!0,variant:"outlined",onClick:()=>t(!e),startIcon:n.jsx(v.Z,{}),endIcon:e?n.jsx(b.Z,{}):n.jsx(w.Z,{}),sx:{p:2,justifyContent:"space-between",textTransform:"none",fontSize:"1.1rem"},children:"เพิ่มห้องพักใหม่"})}),n.jsx(j(),{in:e,children:n.jsx(c(),{mb:3,children:n.jsx(D,{roomHook:d})})}),n.jsx(em,{roomHook:d})]}),(0,n.jsxs)(c(),{sx:{display:{xs:"none",md:"block"}},children:[n.jsx(c(),{sx:{mb:3},children:n.jsx(D,{roomHook:d})}),n.jsx(em,{roomHook:d})]})]})})}},25469:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(34218);let o={async getRooms(){try{let e=await fetch("/api/rooms");if(!e.ok)throw Error("Failed to fetch rooms");return await e.json()}catch(e){throw console.error("Error fetching rooms:",e),Error("ไม่สามารถดึงข้อมูลห้องพักได้")}},async getRoomById(e){try{let t=await fetch(`/api/rooms/${e}`);if(404===t.status)return null;if(!t.ok)throw Error("Failed to fetch room");return await t.json()}catch(e){throw console.error("Error fetching room:",e),Error("ไม่สามารถดึงข้อมูลห้องพักได้")}},async createRoom(e){try{let t=await fetch("/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"ไม่สามารถสร้างห้องพักได้")}return await t.json()}catch(e){throw console.error("Error creating room:",e),e}},async updateRoom(e,t){try{let r=await fetch(`/api/rooms/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.error||"ไม่สามารถแก้ไขข้อมูลห้องพักได้")}return await r.json()}catch(e){throw console.error("Error updating room:",e),e}},async deleteRoom(e){try{let t=await fetch(`/api/rooms/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"ไม่สามารถลบห้องพักได้")}}catch(e){throw console.error("Error deleting room:",e),e}},async searchRooms(e){try{let t=await fetch(`/api/rooms?search=${encodeURIComponent(e)}`);if(!t.ok)throw Error("Failed to search rooms");return await t.json()}catch(e){throw console.error("Error searching rooms:",e),Error("ไม่สามารถค้นหาห้องพักได้")}},async getAvailableRooms(e,t){try{let r=e.toISOString(),n=t.toISOString(),o=await fetch(`/api/rooms?available=true&checkIn=${encodeURIComponent(r)}&checkOut=${encodeURIComponent(n)}`);if(!o.ok)throw Error("Failed to fetch available rooms");return await o.json()}catch(e){throw console.error("Error fetching available rooms:",e),Error("ไม่สามารถดึงข้อมูลห้องพักที่ว่างได้")}}},i=()=>{let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0),[a,s]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),c=(0,n.useCallback)(async()=>{try{i(!0),s(null);let e=await o.getRooms();t(e)}catch(e){s(e instanceof Error?e.message:"Failed to fetch rooms")}finally{i(!1)}},[]),u=(0,n.useCallback)(async()=>{l||await c()},[c,l]),p=(0,n.useCallback)(async e=>{try{s(null);let t=await o.createRoom(e),r=t.id||null;return await u(),r}catch(e){return s(e instanceof Error?e.message:"Failed to create room"),null}},[u]),h=(0,n.useCallback)(async(e,t)=>{try{return s(null),await o.updateRoom(e,t),await u(),!0}catch(e){return s(e instanceof Error?e.message:"Failed to update room"),!1}},[u]),x=(0,n.useCallback)(async e=>{try{return s(null),await o.deleteRoom(e),await u(),!0}catch(e){return s(e instanceof Error?e.message:"Failed to delete room"),!1}},[u]),m=(0,n.useCallback)(async e=>{if(!e.trim()){d(!1),await c();return}try{i(!0),s(null),d(!0);let r=await o.searchRooms(e);t(r)}catch(e){s(e instanceof Error?e.message:"Failed to search rooms")}finally{i(!1)}},[c]),g=(0,n.useCallback)(()=>{d(!1),c()},[c]);return(0,n.useEffect)(()=>{c()},[c]),{rooms:e,loading:r,error:a,refreshRooms:u,addRoom:p,editRoom:h,removeRoom:x,searchRoomsByTerm:m,clearSearch:g}}},33295:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});var n=r(95153);let o=(0,n.createProxy)(String.raw`/Users/aunz/MyProject/New/cool_cat_resort/src/app/rooms/page.tsx`),{__esModule:i,$$typeof:a}=o,s=o.default,l=s}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[271,305,978,812,319,102,578],()=>r(27622));module.exports=n})();